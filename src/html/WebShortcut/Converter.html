<!DOCTYPE html>
<html>
  <head>
    <title>Web Shortcut Converter</title>

	  <link rel="stylesheet" type="text/css" href="webshortcut.css">

	  <link rel="icon" type="image/png" href="favicon16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="favicon32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="favicon192.png" sizes="192x192">
    
    <script src="jquery.js"></script>
    <script src="server.js"></script>
  </head>

  <body>
  	<header>
  		<h1>Web Shortcut Tools</h1>
  		<nav>
  		  <h3>
  			<ul>
  			  <li><a href="index.html">Overview</a></li>
  				<li><a href="Launcher.html">Launcher</a></li>
  				<li>Converter</li>
  			</ul>
  			</h3>
  		</nav>
  	</header>

    <div id="filedrag"></div>

  	<script>
  	  // call initialization file
      if (window.File && window.FileList && window.FileReader) {
        Init();
      }
  		
  		function Init() {
  			var filedrag = $("#filedrag")[0];
  
  			// If XMLHttpRequest is available, enable the event listeners and hide the submit button?
  			var xhr = new XMLHttpRequest();
  			if (xhr.upload) {	
  				filedrag.addEventListener("dragover", FileDragHover, false);
  				filedrag.addEventListener("dragleave", FileDragHover, false);
  				filedrag.addEventListener("drop", FileSelectHandler, false);
  				filedrag.style.display = "block";
  			}
  
  		}
  		
  		// file drag hover
  		function FileDragHover(e) {
  			e.stopPropagation();
  			e.preventDefault();
  			e.target.className = (e.type == "dragover" ? "hover" : "");
  		}
  		
  		// file selection
  		function FileSelectHandler(e) {
  		  // cancel event and hover styling
  			FileDragHover(e);
  
  			// fetch FileList object
  			var files = e.target.files || e.dataTransfer.files;
  			
  			$.ajax({
          url: GetConvertShortcutUrl(),
           data: "<test></test>",
          cache: false,
          contentType: false,
          processData: false,
          type: 'POST',
          contentType: "text/xml",
          success: function(data) {
            processResponse(data);
          },
          error: function(data) {
            alert('An error occurred!');
          }
        });  	
      }
      
      function htmlEncode(value) {
  		    return $('<div/>').text(value).html();
  		}
  
  		function processResponse(response) {
        alert('Success!');
  		}
  	</script>
  </body>

</html> 
